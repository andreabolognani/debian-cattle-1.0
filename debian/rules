#!/usr/bin/make -f

DEB_HOST_MULTIARCH ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)

%:
	dh $@

override_dh_auto_configure:
	for input in $$(ls debian/*.in); do \
		output="debian/$$(basename "$${input}" .in)"; \
		sed \
			-e "s/@DEB_HOST_MULTIARCH@/$(DEB_HOST_MULTIARCH)/g" \
			"$${input}" > "$${output}"; \
	done
	# Update build system
	gtkdocize --flavour no-tmpl
	autoreconf --force \
	           --install \
	           --symlink
	# Run configure
	dh_auto_configure -- \
	                  --enable-introspection \
	                  --enable-gtk-doc
